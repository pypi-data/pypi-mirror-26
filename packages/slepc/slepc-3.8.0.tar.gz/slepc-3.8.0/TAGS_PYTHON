
config/gmakegen.py,1264
PKGS = 'sys eps svd pep nep mfn lme'.split()PKGS11,362
LANGS = dict(c='C', cxx='CXX', cu='CU', F='F')LANGS12,407
    def all(iterable):all17,533
    def _relpath(path, start=os.path.curdir):_relpath26,734
class debuglogger(object):debuglogger45,1418
    def __init__(self, log):__init__46,1445
    def write(self, string):write49,1499
class Slepc(object):Slepc52,1561
    def __init__(self, slepc_dir=None, petsc_dir=None, petsc_arch=None, installed_petsc=False, verbose=False):__init__53,1582
    def petsc_path(self, *args):petsc_path76,2768
    def arch_path(self, *args):arch_path82,2976
    def read_conf(self):read_conf85,3077
    def inconf(self, key, val):inconf105,4028
    def relpath(self, root, src):relpath116,4477
    def get_sources(self, makevars):get_sources119,4584
    def gen_pkg(self, pkg):gen_pkg126,4875
            def mkrel(src):mkrel147,5927
    def gen_gnumake(self, fd):gen_gnumake157,6374
        def write(stem, srcs):write158,6405
    def summary(self):summary168,6844
def WriteGnuMake(slepc):WriteGnuMake171,6900
def main(slepc_dir=None, petsc_dir=None, petsc_arch=None, installed_petsc=False, output=None, verbose=False):main185,7511
    parser = optparse.OptionParser()parser195,7938

config/configure.py,4454
def AddDefine(conffile,name,value,prefix='SLEPC_'):AddDefine14,451
def CreateFile(basedir,fname,log):CreateFile17,597
def CreateDir(basedir,dirname,log):CreateDir26,862
def CreateDirTwo(basedir,dir1,dir2,log):CreateDirTwo36,1169
def CreateDirTest(basedir,dirname,log):CreateDirTest52,1681
def WriteModulesFile(modules,version,sdir):WriteModulesFile65,2068
def WritePkgconfigFile(pkgconfig,version,pversion,sdir,isinstall,prefixdir,slflag):WritePkgconfigFile77,2718
def WriteCMakeConfigFile(cmakeconf):WriteCMakeConfigFile95,3524
def WriteReconfigScript(reconfig,slepcdir,usedargs):WriteReconfigScript111,4252
configdir = os.path.abspath('config')configdir132,5544
argdb = argdb.ArgDB(sys.argv)argdb140,5820
log   = log.Log()log141,5850
slepc   = slepc.SLEPc(argdb,log)slepc145,6021
petsc   = petsc.PETSc(argdb,log)petsc146,6054
arpack  = arpack.Arpack(argdb,log)arpack147,6087
blopex  = blopex.Blopex(argdb,log)blopex148,6122
blzpack = blzpack.Blzpack(argdb,log)blzpack149,6157
feast   = feast.Feast(argdb,log)feast150,6194
primme  = primme.Primme(argdb,log)primme151,6227
trlan   = trlan.Trlan(argdb,log)trlan152,6262
sowing  = sowing.Sowing(argdb,log)sowing153,6295
lapack  = lapack.Lapack(argdb,log)lapack154,6330
slicot  = slicot.Slicot(argdb,log)slicot155,6365
externalpackages = [arpack, blopex, blzpack, feast, primme, slicot, trlan]externalpackages157,6401
optionspackages  = [slepc, arpack, blopex, blzpack, feast, primme, slicot, trlan, sowing]optionspackages158,6476
checkpackages    = [arpack, blopex, blzpack, feast, primme, slicot, trlan, lapack]checkpackages159,6566
emptyarch = not ('PETSC_ARCH' in os.environ and os.environ['PETSC_ARCH'])emptyarch187,7566
  archname = petsc.archarchname191,7697
libdir  = CreateDir(archdir,'lib',log)libdir195,7831
confdir = CreateDirTwo(libdir,'slepc','conf',log)confdir196,7870
      f = open(os.path.join(confdir,'slepcvariables'),'r')f220,8713
      searchlines = f.readlines()searchlines221,8772
includedir = CreateDir(archdir,'include',log)includedir244,9691
modulesdir = CreateDirTwo(confdir,'modules','slepc',log)modulesdir245,9737
pkgconfdir = CreateDir(libdir,'pkgconfig',log)pkgconfdir246,9794
slepcvars  = CreateFile(confdir,'slepcvariables',log)slepcvars247,9841
slepcrules = CreateFile(confdir,'slepcrules',log)slepcrules248,9895
slepcconf  = CreateFile(includedir,'slepcconf.h',log)slepcconf249,9945
cmakeconf  = CreateFile(confdir,'SLEPcBuildInternal.cmake',log)cmakeconf250,9999
pkgconfig  = CreateFile(pkgconfdir,'SLEPc.pc',log)pkgconfig251,10063
  modules  = CreateFile(modulesdir,slepc.lversion,log)modules253,10134
  modules  = CreateFile(modulesdir,slepc.lversion+'-'+archname,log)modules255,10195
  reconfig = CreateFile(confdir,'reconfigure-'+archname+'.py',log)reconfig256,10263
  reconfigpath = os.path.join(confdir,'reconfigure-'+archname+'.py')reconfigpath257,10330
  globconf = CreateFile(os.path.join(slepc.dir,'lib','slepc','conf'),'slepcvariables',log)globconf281,11292
testruns = set(petsc.test_runs.split())testruns312,12818
supported_tests = set(['C','C_Complex','C_NoComplex','C_NotSingle','C_NoComplex_NotSingle','VECCUDA','VECCUDA_Complex','VECCUDA_NoComplex'])supported_tests313,12858
  supported_tests = supported_tests.union(set(['F90','Fortran','F90_Complex','Fortran_Complex','F90_NoComplex','Fortran_NoComplex','F90_NotSingle','Fortran_NotSingle','Fortran_NoComplex_NotSingle']))supported_tests315,13017
testruns = testruns.intersection(supported_tests)testruns316,13217
    testruns = testruns.union(set(['C_Double']))testruns319,13322
    testruns = testruns.union(set(['C_DataFile']))testruns321,13452
      testruns = testruns.union(set(['DATAFILESPATH_Complex']))testruns324,13557
      testruns = testruns.union(set(['DATAFILESPATH']))testruns326,13631
    testruns = testruns.union(set(pkg.TestRuns(petsc)))testruns328,13718
slflag = ''slflag339,14169
bfort = petsc.bfortbfort363,14941
  bfort = sowing.Install(archdir,petsc.make)bfort365,14988
      bfort = os.path.join(archdir,'bin','bfort')bfort370,15110
      bfort = sowing.Install(archdir,petsc.make)bfort372,15194
cmakeok = Falsecmakeok386,15734
      cmakeok = cmakeboot.main(slepc.dir,petsc.dir,log=log)cmakeok403,16347
      petscdate = dateutil.parser.parse(petsc.gitdate)petscdate439,17748
      slepcdate = dateutil.parser.parse(slepc.gitdate)slepcdate440,17803

config/package.py,810
class Package:Package14,488
  def __init__(self,argdb,log):__init__16,504
  def ProcessArgs(self,argdb):ProcessArgs29,899
  def Process(self,conf,vars,cmake,petsc,archdir=''):Process53,1752
  def Precondition(self,petsc):Precondition71,2416
  def Download(self,externdir,builddir,prefix=None):Download89,3398
  def ShowHelp(self):ShowHelp150,5658
  def ShowInfo(self):ShowInfo161,6379
  def TestRuns(self,petsc):TestRuns166,6550
  def LinkWithOutput(self,functions,callbacks,flags):LinkWithOutput172,6670
  def Link(self,functions,callbacks,flags):Link223,8506
  def FortranLink(self,functions,callbacks,flags):FortranLink228,8666
  def GenerateGuesses(self,name):GenerateGuesses257,9573
  def FortranLib(self,conf,vars,cmake,dirs,libs,functions,callbacks = []):FortranLib276,10165

config/cmakegen.py,1817
    class defaultdict(dict):defaultdict24,771
        def __init__(self, default_factory=None, *a, **kw):__init__25,800
        def __getitem__(self, key):__getitem__31,1127
        def __missing__(self, key):__missing__36,1305
        def __reduce__(self):__reduce__41,1502
        def copy(self):copy47,1733
        def __copy__(self):__copy__49,1792
        def __deepcopy__(self, memo):__deepcopy__51,1878
        def __repr__(self):__repr__55,2051
class StdoutLogger(object):StdoutLogger59,2211
  def write(self,str):write60,2239
def cmakeconditional(key,val):cmakeconditional63,2278
  def unexpected():unexpected64,2309
AUTODIRS = set('ftn-auto ftn-custom f90-custom'.split()) # Automatically recurse into these, if they existAUTODIRS88,3074
SKIPDIRS = set('benchmarks'.split())                     # Skip these during the buildSKIPDIRS89,3181
NOWARNDIRS = set('tests tutorials'.split())              # Do not warn about mismatch in theseNOWARNDIRS90,3268
def pathsplit(path):pathsplit92,3364
class Mistakes(object):Mistakes101,3647
    def __init__(self, log, verbose=False):__init__102,3671
    def compareDirLists(self,root, mdirs, dirs):compareDirLists107,3797
    def compareSourceLists(self, root, msources, files):compareSourceLists123,4586
    def summary(self):summary139,5477
def stripsplit(line):stripsplit145,6041
def pkgsources(pkg, mistakes):pkgsources148,6121
    def relpath(filename):relpath169,7166
def writeRoot(f,petscdir,petscdestdir):writeRoot180,7724
def writePackage(f,pkg,pkgdeps,mistakes):writePackage223,9399
    def body(indentlevel):body226,9520
def main(slepcdir,petscdir,petscdestdir,log=StdoutLogger(), verbose=False):main249,10504
    written = Truewritten290,12247
  parser = optparse.OptionParser()parser301,12478

config/packages/sowing.py,142
class Sowing(package.Package):Sowing14,445
  def __init__(self,argdb,log):__init__16,477
  def Install(self,archdir,make):Install23,714

config/packages/slicot.py,214
class Slicot(package.Package):Slicot14,440
  def __init__(self,argdb,log):__init__16,472
  def Check(self,conf,vars,cmake,petsc):Check30,939
  def Install(self,conf,vars,cmake,petsc,archdir):Install45,1272

config/packages/primme.py,214
class Primme(package.Package):Primme14,448
  def __init__(self,argdb,log):__init__16,480
  def Check(self,conf,vars,cmake,petsc):Check29,952
  def Install(self,conf,vars,cmake,petsc,archdir):Install78,2691

config/packages/slepc.py,194
class SLEPc:SLEPc13,432
  def __init__(self,argdb,log):__init__15,446
  def ShowHelp(self):ShowHelp23,749
  def InitDir(self):InitDir30,1132
  def LoadVersion(self):LoadVersion42,1688

config/packages/blopex.py,159
class Blopex(package.Package):Blopex14,448
  def __init__(self,argdb,log):__init__16,480
  def Install(self,conf,vars,cmake,petsc,archdir):Install26,862

config/packages/petsc.py,253
class PETSc(package.Package):PETSc13,434
  def __init__(self,argdb,log):__init__15,465
  def Check(self):Check19,574
  def InitDir(self,prefixdir):InitDir22,637
  def LoadVersion(self):LoadVersion34,1035
  def LoadConf(self):LoadConf64,2300

config/packages/lapack.py,255
class Lapack(package.Package):Lapack13,420
  def __init__(self,argdb,log):__init__15,452
  def ShowInfo(self):ShowInfo19,562
  def Process(self,conf,vars,cmake,petsc,archdir=''):Process29,978
  def Check(self,conf,vars,cmake,petsc):Check36,1214

config/packages/blzpack.py,149
class Blzpack(package.Package):Blzpack13,420
  def __init__(self,argdb,log):__init__15,453
  def Check(self,conf,vars,cmake,petsc):Check23,692

config/packages/trlan.py,212
class Trlan(package.Package):Trlan14,440
  def __init__(self,argdb,log):__init__16,471
  def Check(self,conf,vars,cmake,petsc):Check29,985
  def Install(self,conf,vars,cmake,petsc,archdir):Install47,1387

config/packages/arpack.py,261
class Arpack(package.Package):Arpack14,440
  def __init__(self,argdb,log):__init__16,472
  def Functions(self,petsc):Functions29,985
  def Check(self,conf,vars,cmake,petsc):Check55,1794
  def Install(self,conf,vars,cmake,petsc,archdir):Install73,2363

config/packages/feast.py,145
class Feast(package.Package):Feast13,420
  def __init__(self,argdb,log):__init__15,451
  def Check(self,conf,vars,cmake,petsc):Check23,691

config/log.py,268
class Log:Log13,415
  def Open(self,filename):Open15,427
  def Println(self,string):Println22,623
  def Print(self,string):Print26,700
  def NewSection(self,string):NewSection30,775
  def write(self,string):write35,900
  def Exit(self,string):Exit38,958

config/argdb.py,382
class ArgDB:ArgDB13,415
  def __init__(self,argv):__init__15,429
  def UsedArgs(self):UsedArgs35,1217
  def PopString(self,keyword):PopString38,1272
  def PopPath(self,keyword):PopPath55,1686
  def PopUrl(self,keyword):PopUrl72,2130
  def PopBool(self,keyword):PopBool92,2639
  def PopHelp(self):PopHelp109,3048
  def ErrorIfNotEmpty(self):ErrorIfNotEmpty125,3423

config/install.py,1381
  WindowsError = NoneWindowsError7,94
class Installer:Installer9,117
  def __init__(self, args = None):__init__10,134
  def setupDirectories(self):setupDirectories26,775
  def checkDestdir(self):checkDestdir46,1986
  def copyfile(self, src, dst, symlinks = False, copyFunc = shutil.copy2):copyfile70,3424
  def copyexamplefiles(self, src, dst, copyFunc = shutil.copy2):copyexamplefiles95,4245
  def fixExamplesMakefile(self, src):fixExamplesMakefile104,4585
  def copyExamples(self, src, dst):copyExamples118,5096
  def copytree(self, src, dst, symlinks = False, copyFunc = shutil.copy2, exclude = []):copytree146,6243
  def fixConfFile(self, src):fixConfFile198,8309
  def fixConf(self):fixConf220,9509
  def createUninstaller(self):createUninstaller227,9778
  def installIncludes(self):installIncludes259,10678
  def installConf(self):installConf265,10970
  def installBin(self):installBin270,11195
  def installShare(self):installShare277,11463
  def copyLib(self, src, dst):copyLib286,11968
  def installLib(self):installLib311,13122
  def outputInstallDone(self):outputInstallDone316,13276
  def outputDestDirDone(self):outputDestDirDone326,13584
  def runsetup(self):runsetup335,13852
  def runcopy(self):runcopy340,13938
  def runfix(self):runfix360,14672
  def rundone(self):rundone364,14723
  def run(self):run372,14897

config/cmakeboot.py,647
def noCheck(command, status, output, error):noCheck20,746
def quoteIfNeeded(path):quoteIfNeeded23,801
class StdoutLogger(object):StdoutLogger31,1064
  def write(self,str):write32,1092
class PETScMaker(script.Script):PETScMaker35,1131
 def __init__(self, slepcdir, petscdir, petscarch, argDB = None, framework = None):__init__36,1164
 def __str__(self):__str__47,1558
 def setupModules(self):setupModules50,1592
 def setup(self):setup69,2953
 def cmakeboot(self, args, log):cmakeboot75,3093
def main(slepcdir, petscdir, petscarch=os.environ['PETSC_ARCH'], argDB=None, framework=None, log=StdoutLogger(), args=[]):main176,8210
