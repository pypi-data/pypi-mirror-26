{% load staticfiles widgets_tag %}
{% import_widgets 'navigation_links' %}

<div class="c-hamburger c-hamburger--htx show-for-small-only">
  <span>Menu</span>
</div>

<a class="logo logo--navigation" href="{% url 'colab_edemocracia:home' %}">
  <div class="logo__icon logo__icon--edemocracia">
    <img class="logo__image" src="{% static 'img/edem-logo.png' %}">
  </div>
  <div class="logo__name logo__name--edemocracia">
    <img class="logo__image" src="{% static 'img/edem-logo-text-title.png' %}">
  </div>
</a>

<form action="{% url 'haystack_search' %}" method="GET" role="search" class="search-form search-form--navigation" data-default-behavior="true" title="Pesquisar">
  <input name="q" value="{{ request.GET.q }}" class="search-form__input" type="text" placeholder="Pesquisar">
  <span class="search-form__icon">
    <span class="show-for-sr">Pesquisar</span>
    <i class="search-form__search-icon icon icon-search" aria-hidden="true"></i>
  </span>
</form>

<div class="navigation-wrapper">

  <ul class="menu-list menu-list--dropdown menu-list--apps" title="Ferramentas">
    <span class="show-for-sr">Ferramentas</span>
    <i class="menu-list__icon icon icon-th" aria-hidden="true"></i>
    <div class="menu-list--dropdown__wrapper">
      {% for widget in widgets_navigation_links %}
        {{widget.get_body}}
      {% endfor %}
      <li class="menu-list__item">
          <a class="menu-list__link" href="/fies" title="Participe da discursão sobre o novo FIES!">
            <div class="logo logo--menu-list">
              <div class="logo__icon--previdencia">
                <img class="logo__image" src="/fies/assets/images/fies.png">
              </div>
            </div>
            <span class="menu-list__text">FIES</span>
          </a>
        </li>
    </div>
  </ul>


  {% if user.is_authenticated %}

    <ul class="menu-list menu-list--dropdown menu-list--profile" title="Perfil de Usuário">
      {% if user.profile.avatar %}
      <div class="user-profile" style="background-image: url('{{ user.profile.get_avatar_140x140 }}')">
      </div>
      {% else %}
      <div class="user-profile">
        <i class="icon icon-user" aria-hidden="true"></i>
      </div>
      {% endif %}
      <div class="menu-list--dropdown__wrapper">
        <li class="menu-list__item">
          <a class="menu-list__link" href="{% url 'colab_edemocracia:profile' %}">
            <span class="menu-list__text">Meu Perfil</span><i class="icon icon-user" aria-hidden="true"></i>
          </a>
        </li>
        <li class="menu-list__item">
          <a class="menu-list__link" href="/account/logout">
            <span class="menu-list__text">Encerrar Sessão</span><i class="icon icon-sign-out" aria-hidden="true"></i>
          </a>
        </li>
      </div>
    </ul>

  {% else %}

    <ul class="menu-list menu-list--profile">
      <li class="menu-list__item">
        <a class="menu-list__link" href="{% url 'colab_edemocracia:home' %}?next={{ request.path }}" title="Fazer login">
          <span class="show-for-sr">Fazer login</span>
          <span class="hide-for-medium">Fazer login</span>
          <i class="menu-list__icon icon icon-sign-in show-for-small" aria-hidden="true"></i>
        </a>
      </li>
    </ul>

  {% endif %}
</div>

<!-- Begin temp info-banner -->
  <a class="info-banner-drop" href="/fies">
    <img class="info-banner__image" src="/fies/assets/images/fies.png" alt="FIES" >
    <p class="info-banner__text">Participe da discussão sobre o novo FIES!</p>
    <img src="/fies/assets/images/pip3.png" alt="Seguir link" class="info-banner__pip">
  </a>

  <style>
    @import url('https://fonts.googleapis.com/css?family=Passion+One');

    @keyframes slide-down {
      0% {transform: translate(50%, -100%);}
      75% {transform: translate(50%, -100%);}
      100% {transform: translate(50%, 0);}
    }

    .navigation .info-banner-drop {
      align-items: center;
      animation: slide-down 2s cubic-bezier(0.55, 0, 0.1, 1);
      background-color: #75c5f0;
      background: radial-gradient(circle at left 30vw top 50%, #a3d8f5 35%, #95d2f3 0);
      border-bottom-left-radius: 10px;
      border-bottom-right-radius: 10px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 1px 4px rgba(0,0,0,0.23);
      display: flex;
      height: 70px;
      justify-content: space-between;
      overflow: hidden;
      padding: 8px 32px;
      position: absolute;
      right: 50%;
      text-decoration: none;
      transform: translate(50%, 0);
      width: 640px;
      transition: transform 0.6s 0.5s cubic-bezier(0.55, 0, 0.1, 1), width 0.5s cubic-bezier(0.55, 0, 0.1, 1);
    }

    .headroom--unpinned .navigation .info-banner {
      transform: translate(50%, -100%) !important;
      transition: transform 0s 0.2s cubic-bezier(0.55, 0, 0.1, 1), width 0.5s cubic-bezier(0.55, 0, 0.1, 1);
    }

    .navigation .info-banner__image {
      height: 135%;
    }

    .navigation .info-banner__text {
      color: hsla(218, 56%, 30%, 1);
      font-family: 'Passion One','Open Sans', sans-serif;
      font-size: 32px;
      font-weight: 400;
      line-height: 26px;
      margin: 0 1em;
      text-align: center;
    }

    .navigation .info-banner__pip {
      height: 56px;
    }

    @media (min-width: 640px) and (max-width: 1199px) {
      .navigation .info-banner-drop {
        width: 100%;
        transform: translate(50%, 67px);
        border-radius: 0;
      }

      .headroom--pinned #template-body, .headroom--top #template-body {
        padding-top: 131px;
      }
    }

    @media screen and (max-width: 639px) {
      .navigation .info-banner-drop {
        display: none;
      }
    }
    </style>
    <!-- End temp info-banner -->