{% extends view.base_template|default:"base.html" %}
{% load lazycrud %}

{% block js %}
{{ block.super }}
{% include "lazycrud/_datatables_js.html" %}
{% endblock %}

{% block css %}
{% include "lazycrud/_datatables_css.html" %}
{% endblock %}

{% block title %}{{ view.page_title }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <h1 class="page-header">{{ view.page_title }}</h1>
    </div>
</div>
{% if view.create_url %}
<div class="row">
    <div class="col-md-12">
        <a class="btn btn-success pull-right" role="button" href="{{ view.create_url }}"><i class="fa fa-plus"></i> {{ view.create_label }}</a>
    </div>
</div>
<hr>
{% endif %}
<div class="row">
    <div class="col-md-12">
        <table class="table table-striped table-hover table-datatables"
            {% if view.datatables_options %} data-datatables-options="{{ view.datatables_options }}"{% endif %}>
            <thead>
                <tr>
                {% for name in view.fields %}
                    <th>{{ view.model|fieldlabel:name }}</th>
                {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for o in object_list %}
                    <tr class="clickable_row"
                    {% if view.detail_url %}
                        data-url="{% url view.detail_url pk=o.pk %}"
                    {% else %}
                        data-url="{{ o.get_absolute_url }}"
                    {% endif %}
                    {% if view.detail_url_target %}
                        data-target="{{ view.detail_url_target }}"
                    {% endif %}
                    >
                    {% for name in view.fields %}
                        <td>{{ o|fieldvalue:name }}</td>
                    {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
