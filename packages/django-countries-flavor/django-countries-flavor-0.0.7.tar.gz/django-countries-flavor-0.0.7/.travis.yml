language: python
dist: trusty

python:
  - '3.4'
  - '3.5'
  - '3.6'

addons:
  postgresql: '9.6'
  apt:
    packages:
      - postgresql-9.6-postgis-2.3

  code_climate:
    repo_token:
      secure: 'hHMqmqPpzOryQ33ns4jgKpLEqJe+//3kNYSYRo1R4+4rmOxqPDwmsyC9km/v2r2XHwcVs2yWx4U3tpHUzbwUYz5aAiC9SI6DAnDb0VJz/f1UR4fAN5X/2Z5Lbv'

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -y gdal-bin

install:
  - pip install tox tox-travis

before_script:
  - psql -U postgres -c 'CREATE EXTENSION postgis'
  - psql -U postgres -c 'CREATE DATABASE test;'

script:
  - tox

after_success:
  - pip install codecov
  - codecov
