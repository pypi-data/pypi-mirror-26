<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">




<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <!-- Google Tag Manager - JD-20170831 --> 
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MP366CC');</script>
    <!-- End Google Tag Manager -->

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta property="description" content="Efficient topic modelling of text semantics in Python." />
    <meta property="og:title" content="gensim: topic modelling for humans" />
    <meta property="og:description" content="Efficient topic modelling in Python" />

    
      <title>gensim: corpora.textcorpus – Building corpora with dictionaries</title>

    
  <link rel="stylesheet" href="../_static/css/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/jquery.qtip.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/anythingslider.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/>

  </head>

  <body>
    <!-- Google Tag Manager (noscript) - JD-20170831 -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MP366CC"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div id="topwrap">
      
      <div id="top1">
        <div id="left1">
          <h1 class="h1gensim">
            <img src="../_static/images/logo-gensim_compact.png" alt="gensim logo" title="Gensim - topic modelling for humans" />
          </h1>
        </div>

        <div id="middleright">
          <div id="middle1">
            <div id="gensim"><a href="../index.html"><img src="../_static/images/gensim_compact.png" alt="gensim" title="Gensim home" /></a></div>
            <div id="tagline"><img src="../_static/images/tagline_compact.png" alt="gensim tagline" /></div>
          </div>
          <div id="right1">
            <div class="consulting-banner">
              <h3><a href="http://rare-technologies.com/">Get Expert Help</a></h3>
              <p>• machine learning, NLP, data mining</p>
              <p>• custom SW design, development, optimizations</p>
              <p>• corporate trainings &amp; IT consulting</p>
            </div>
          </div>
        </div>
      </div>
     

      
      <div id="menu">
        <div id="indentation1">
          <ul class="menubuttons">
            <li class="menubutton"><a href="../index.html">Home</a></li>
            <li class="menubutton"><a href="../tutorial.html">Tutorials</a></li>
            <li class="menubutton"><a href="../install.html">Install</a></li>
            <li class="menubutton"><a href="../support.html">Support</a></li>
            <li class="menubutton"><a href="../apiref.html">API</a></li>
            <li class="menubutton"><a href="../about.html">About</a></li>
          </ul>
        </div>
      </div>
      

      <div class="clearer"></div>
    </div>

    
  <script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
    URL_ROOT: '../',
    VERSION: '3.1.0',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE: true
  };
  </script>
    <script type="text/javascript" src="../_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery.qtip.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-migrate-1.1.1.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery.anythingslider.min.js"></script>

    
    <div class="document">
      
        <div id="thinbanner">
          <div id="bodythinbanner">
            <span class="h2gensim">corpora.textcorpus – Building corpora with dictionaries</span>
          </div>
        </div>
        <div class="obsah">
          <div class="obsahwrapper">
            
  <div class="section" id="module-gensim.corpora.textcorpus">
<span id="corpora-textcorpus-building-corpora-with-dictionaries"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">corpora.textcorpus</span></code> – Building corpora with dictionaries<a class="headerlink" href="#module-gensim.corpora.textcorpus" title="Permalink to this headline">¶</a></h1>
<p>Text corpora usually reside on disk, as text files in one format or another
In a common scenario, we need to build a dictionary (a <cite>word-&gt;integer id</cite>
mapping), which is then used to construct sparse bag-of-word vectors
(= sequences of <cite>(word_id, word_weight)</cite> 2-tuples).</p>
<p>This module provides some code scaffolding to simplify this pipeline. For
example, given a corpus where each document is a separate line in file on disk,
you would override the <cite>TextCorpus.get_texts</cite> method to read one line=document
at a time, process it (lowercase, tokenize, whatever) and yield it as a sequence
of words.</p>
<p>Overriding <cite>get_texts</cite> is enough; you can then initialize the corpus with e.g.
<cite>MyTextCorpus(bz2.BZ2File(‘mycorpus.txt.bz2’))</cite> and it will behave correctly like a
corpus of sparse vectors. The <cite>__iter__</cite> methods is automatically set up, and
dictionary is automatically populated with all <cite>word-&gt;id</cite> mappings.</p>
<p>The resulting object can be used as input to all gensim models (TFIDF, LSI, …),
serialized with any format (Matrix Market, SvmLight, Blei’s LDA-C format etc).</p>
<p>See the <cite>gensim.test.test_miislita.CorpusMiislita</cite> class for a simple example.</p>
<dl class="class">
<dt id="gensim.corpora.textcorpus.TextCorpus">
<em class="property">class </em><code class="descclassname">gensim.corpora.textcorpus.</code><code class="descname">TextCorpus</code><span class="sig-paren">(</span><em>input=None</em>, <em>dictionary=None</em>, <em>metadata=False</em>, <em>character_filters=None</em>, <em>tokenizer=None</em>, <em>token_filters=None</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextCorpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../interfaces.html#gensim.interfaces.CorpusABC" title="gensim.interfaces.CorpusABC"><code class="xref py py-class docutils literal"><span class="pre">gensim.interfaces.CorpusABC</span></code></a></p>
<p>Helper class to simplify the pipeline of getting bag-of-words vectors (= a
gensim corpus) from plain text.</p>
<p>This is an abstract base class: override the <cite>get_texts()</cite> and <cite>__len__()</cite>
methods to match your particular input.</p>
<p>Given a filename (or a file-like object) in constructor, the corpus object
will be automatically initialized with a dictionary in <cite>self.dictionary</cite> and
will support the <cite>iter</cite> corpus method. You have a few different ways of utilizing
this class via subclassing or by construction with different preprocessing arguments.</p>
<p>The <cite>iter</cite> method converts the lists of tokens produced by <cite>get_texts</cite> to BoW format
using <cite>Dictionary.doc2bow</cite>. <cite>get_texts</cite> does the following:</p>
<ol class="arabic simple">
<li>Calls <cite>getstream</cite> to get a generator over the texts. It yields each document in
turn from the underlying text file or files.</li>
<li>For each document from the stream, calls <cite>preprocess_text</cite> to produce a list of
tokens; if metadata is enabled, it yields a 2-<cite>tuple</cite> with the document number as
the second element.</li>
</ol>
<p>Preprocessing consists of 0+ <cite>character_filters</cite>, a <cite>tokenizer</cite>, and 0+ <cite>token_filters</cite>.</p>
<p>The preprocessing consists of calling each filter in <cite>character_filters</cite> with the document
text; unicode is not guaranteed, and if desired, the first filter should convert to unicode.
The output of each character filter should be another string. The output from the final
filter is fed to the <cite>tokenizer</cite>, which should split the string into a list of tokens (strings).
Afterwards, the list of tokens is fed through each filter in <cite>token_filters</cite>. The final
output returned from <cite>preprocess_text</cite> is the output from the final token filter.</p>
<p>So to use this class, you can either pass in different preprocessing functions using the
<cite>character_filters</cite>, <cite>tokenizer</cite>, and <cite>token_filters</cite> arguments, or you can subclass it.
If subclassing: override <cite>getstream</cite> to take text from different input sources in different
formats. Overrride <cite>preprocess_text</cite> if you must provide different initial preprocessing,
then call the <cite>TextCorpus.preprocess_text</cite> method to apply the normal preprocessing. You
can also overrride <cite>get_texts</cite> in order to tag the documents (token lists) with different
metadata.</p>
<p>The default preprocessing consists of:</p>
<ol class="arabic simple">
<li>lowercase and convert to unicode; assumes utf8 encoding</li>
<li>deaccent (asciifolding)</li>
<li>collapse multiple whitespaces into a single one</li>
<li>tokenize by splitting on whitespace</li>
<li>remove words less than 3 characters long</li>
<li>remove stopwords; see <cite>gensim.parsing.preprocessing</cite> for the list of stopwords</li>
</ol>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>input</strong> (<em>str</em>) – path to top-level directory to traverse for corpus documents.</li>
<li><strong>dictionary</strong> (<a class="reference internal" href="dictionary.html#gensim.corpora.dictionary.Dictionary" title="gensim.corpora.dictionary.Dictionary"><em>Dictionary</em></a>) – if a dictionary is provided, it will not be updated
with the given corpus on initialization. If none is provided, a new dictionary
will be built for the given corpus. If no corpus is given, the dictionary will
remain uninitialized.</li>
<li><strong>metadata</strong> (<em>bool</em>) – True to yield metadata with each document, else False (default).</li>
<li><strong>character_filters</strong> (<em>iterable of callable</em>) – each will be applied to the text of each
document in order, and should return a single string with the modified text.
For Python 2, the original text will not be unicode, so it may be useful to
convert to unicode as the first character filter. The default character filters
lowercase, convert to unicode (strict utf8), perform ASCII-folding, then collapse
multiple whitespaces.</li>
<li><strong>tokenizer</strong> (<em>callable</em>) – takes as input the document text, preprocessed by all filters
in <cite>character_filters</cite>; should return an iterable of tokens (strings).</li>
<li><strong>token_filters</strong> (<em>iterable of callable</em>) – each will be applied to the iterable of tokens
in order, and should return another iterable of tokens. These filters can add,
remove, or replace tokens, or do nothing at all. The default token filters
remove tokens less than 3 characters long and remove stopwords using the list
in <cite>gensim.parsing.preprocessing.STOPWORDS</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="gensim.corpora.textcorpus.TextCorpus.get_texts">
<code class="descname">get_texts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextCorpus.get_texts" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the collection, yielding one document at a time. A document
is a sequence of words (strings) that can be fed into <cite>Dictionary.doc2bow</cite>.
Each document will be fed through <cite>preprocess_text</cite>. That method should be
overridden to provide different preprocessing steps. This method will need
to be overridden if the metadata you’d like to yield differs from the line
number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">generator of lists of tokens (strings); each list corresponds to a preprocessed
document from the corpus <cite>input</cite>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextCorpus.getstream">
<code class="descname">getstream</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextCorpus.getstream" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield documents from the underlying plain text collection (of one or more files).
Each item yielded from this method will be considered a document by subsequent
preprocessing methods.</p>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextCorpus.init_dictionary">
<code class="descname">init_dictionary</code><span class="sig-paren">(</span><em>dictionary</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextCorpus.init_dictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>If <cite>dictionary</cite> is None, initialize to an empty Dictionary, and then if there
is an <cite>input</cite> for the corpus, add all documents from that <cite>input</cite>. If the
<cite>dictionary</cite> is already initialized, simply set it as the corpus’s <cite>dictionary</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextCorpus.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>fname</em>, <em>mmap=None</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextCorpus.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a previously saved object from file (also see <cite>save</cite>).</p>
<p>If the object was saved with large arrays stored separately, you can load
these arrays via mmap (shared memory) using <cite>mmap=’r’</cite>. Default: don’t use
mmap, load large arrays as normal objects.</p>
<p>If the file being loaded is compressed (either ‘.gz’ or ‘.bz2’), then
<cite>mmap=None</cite> must be set.  Load will raise an <cite>IOError</cite> if this condition
is encountered.</p>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextCorpus.preprocess_text">
<code class="descname">preprocess_text</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextCorpus.preprocess_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply preprocessing to a single text document. This should perform tokenization
in addition to any other desired preprocessing steps.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>text</strong> (<em>str</em>) – document text read from plain-text file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">tokens produced from <cite>text</cite> as a result of preprocessing.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">iterable of str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextCorpus.sample_texts">
<code class="descname">sample_texts</code><span class="sig-paren">(</span><em>n</em>, <em>seed=None</em>, <em>length=None</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextCorpus.sample_texts" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield n random documents from the corpus without replacement.</p>
<p>Given the number of remaining documents in a corpus, we need to choose n elements.
The probability for the current element to be chosen is n/remaining.
If we choose it, we just decrease the n and move to the next element.
Computing the corpus length may be a costly operation so you can use the optional
parameter <cite>length</cite> instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n</strong> (<em>int</em>) – number of documents we want to sample.</li>
<li><strong>seed</strong> (<em>int|None</em>) – if specified, use it as a seed for local random generator.</li>
<li><strong>length</strong> (<em>int|None</em>) – if specified, use it as a guess of corpus length.
It must be positive and not greater than actual corpus length.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first"><em>list[str]</em> – document represented as a list of tokens. See get_texts method.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> – when n is invalid or length was set incorrectly.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextCorpus.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextCorpus.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextCorpus.save_corpus">
<code class="descname">save_corpus</code><span class="sig-paren">(</span><em>fname</em>, <em>corpus</em>, <em>id2word=None</em>, <em>metadata=False</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextCorpus.save_corpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Save an existing <cite>corpus</cite> to disk.</p>
<p>Some formats also support saving the dictionary (<cite>feature_id-&gt;word</cite> mapping),
which can in this case be provided by the optional <cite>id2word</cite> parameter.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MmCorpus</span><span class="o">.</span><span class="n">save_corpus</span><span class="p">(</span><span class="s1">&#39;file.mm&#39;</span><span class="p">,</span> <span class="n">corpus</span><span class="p">)</span>
</pre></div>
</div>
<p>Some corpora also support an index of where each document begins, so
that the documents on disk can be accessed in O(1) time (see the
<cite>corpora.IndexedCorpus</cite> base class). In this case, <cite>save_corpus</cite> is automatically
called internally by <cite>serialize</cite>, which does <cite>save_corpus</cite> plus saves the index
at the same time, so you want to store the corpus with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MmCorpus</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="s1">&#39;file.mm&#39;</span><span class="p">,</span> <span class="n">corpus</span><span class="p">)</span> <span class="c1"># stores index as well, allowing random access to individual documents</span>
</pre></div>
</div>
<p>Calling <cite>serialize()</cite> is preferred to calling <cite>save_corpus()</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextCorpus.step_through_preprocess">
<code class="descname">step_through_preprocess</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextCorpus.step_through_preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield tuples of functions and their output for each stage of preprocessing.
This is useful for debugging issues with the corpus preprocessing pipeline.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus">
<em class="property">class </em><code class="descclassname">gensim.corpora.textcorpus.</code><code class="descname">TextDirectoryCorpus</code><span class="sig-paren">(</span><em>input</em>, <em>dictionary=None</em>, <em>metadata=False</em>, <em>min_depth=0</em>, <em>max_depth=None</em>, <em>pattern=None</em>, <em>exclude_pattern=None</em>, <em>lines_are_documents=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#gensim.corpora.textcorpus.TextCorpus" title="gensim.corpora.textcorpus.TextCorpus"><code class="xref py py-class docutils literal"><span class="pre">gensim.corpora.textcorpus.TextCorpus</span></code></a></p>
<p>Read documents recursively from a directory,
where each file (or line of each file) is interpreted as a plain text document.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>min_depth</strong> (<em>int</em>) – minimum depth in directory tree at which to begin searching for
files. The default is 0, which means files starting in the top-level directory
<cite>input</cite> will be considered.</li>
<li><strong>max_depth</strong> (<em>int</em>) – max depth in directory tree at which files will no longer be
considered. The default is None, which means recurse through all subdirectories.</li>
<li><strong>pattern</strong> (<em>str</em><em> or </em><em>Pattern</em>) – regex to use for file name inclusion; all those files <em>not</em>
matching this pattern will be ignored.</li>
<li><strong>exclude_pattern</strong> (<em>str</em><em> or </em><em>Pattern</em>) – regex to use for file name exclusion; all files
matching this pattern will be ignored.</li>
<li><strong>lines_are_documents</strong> (<em>bool</em>) – if True, each line of each file is considered to be a
document. If False (default), each file is considered to be a document.</li>
<li><strong>kwargs</strong> – keyword arguments passed through to the <cite>TextCorpus</cite> constructor. This is
in addition to the non-kwargs <cite>input</cite>, <cite>dictionary</cite>, and <cite>metadata</cite>. See
<cite>TextCorpus.__init__</cite> docstring for more details on these.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.exclude_pattern">
<code class="descname">exclude_pattern</code><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.exclude_pattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.get_texts">
<code class="descname">get_texts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.get_texts" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the collection, yielding one document at a time. A document
is a sequence of words (strings) that can be fed into <cite>Dictionary.doc2bow</cite>.
Each document will be fed through <cite>preprocess_text</cite>. That method should be
overridden to provide different preprocessing steps. This method will need
to be overridden if the metadata you’d like to yield differs from the line
number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">generator of lists of tokens (strings); each list corresponds to a preprocessed
document from the corpus <cite>input</cite>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.getstream">
<code class="descname">getstream</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.getstream" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield documents from the underlying plain text collection (of one or more files).
Each item yielded from this method will be considered a document by subsequent
preprocessing methods.</p>
<p>If <cite>lines_are_documents</cite> was set to True, items will be lines from files. Otherwise
there will be one item per file, containing the entire contents of the file.</p>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.init_dictionary">
<code class="descname">init_dictionary</code><span class="sig-paren">(</span><em>dictionary</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.init_dictionary" title="Permalink to this definition">¶</a></dt>
<dd><p>If <cite>dictionary</cite> is None, initialize to an empty Dictionary, and then if there
is an <cite>input</cite> for the corpus, add all documents from that <cite>input</cite>. If the
<cite>dictionary</cite> is already initialized, simply set it as the corpus’s <cite>dictionary</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.iter_filepaths">
<code class="descname">iter_filepaths</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.iter_filepaths" title="Permalink to this definition">¶</a></dt>
<dd><p>Lazily yield paths to each file in the directory structure within the specified
range of depths. If a filename pattern to match was given, further filter to only
those filenames that match.</p>
</dd></dl>

<dl class="attribute">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.lines_are_documents">
<code class="descname">lines_are_documents</code><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.lines_are_documents" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>fname</em>, <em>mmap=None</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a previously saved object from file (also see <cite>save</cite>).</p>
<p>If the object was saved with large arrays stored separately, you can load
these arrays via mmap (shared memory) using <cite>mmap=’r’</cite>. Default: don’t use
mmap, load large arrays as normal objects.</p>
<p>If the file being loaded is compressed (either ‘.gz’ or ‘.bz2’), then
<cite>mmap=None</cite> must be set.  Load will raise an <cite>IOError</cite> if this condition
is encountered.</p>
</dd></dl>

<dl class="attribute">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.max_depth">
<code class="descname">max_depth</code><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.max_depth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.min_depth">
<code class="descname">min_depth</code><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.min_depth" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.pattern">
<code class="descname">pattern</code><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.pattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.preprocess_text">
<code class="descname">preprocess_text</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.preprocess_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply preprocessing to a single text document. This should perform tokenization
in addition to any other desired preprocessing steps.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>text</strong> (<em>str</em>) – document text read from plain-text file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">tokens produced from <cite>text</cite> as a result of preprocessing.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">iterable of str</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.sample_texts">
<code class="descname">sample_texts</code><span class="sig-paren">(</span><em>n</em>, <em>seed=None</em>, <em>length=None</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.sample_texts" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield n random documents from the corpus without replacement.</p>
<p>Given the number of remaining documents in a corpus, we need to choose n elements.
The probability for the current element to be chosen is n/remaining.
If we choose it, we just decrease the n and move to the next element.
Computing the corpus length may be a costly operation so you can use the optional
parameter <cite>length</cite> instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n</strong> (<em>int</em>) – number of documents we want to sample.</li>
<li><strong>seed</strong> (<em>int|None</em>) – if specified, use it as a seed for local random generator.</li>
<li><strong>length</strong> (<em>int|None</em>) – if specified, use it as a guess of corpus length.
It must be positive and not greater than actual corpus length.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first"><em>list[str]</em> – document represented as a list of tokens. See get_texts method.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code> – when n is invalid or length was set incorrectly.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.save_corpus">
<code class="descname">save_corpus</code><span class="sig-paren">(</span><em>fname</em>, <em>corpus</em>, <em>id2word=None</em>, <em>metadata=False</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.save_corpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Save an existing <cite>corpus</cite> to disk.</p>
<p>Some formats also support saving the dictionary (<cite>feature_id-&gt;word</cite> mapping),
which can in this case be provided by the optional <cite>id2word</cite> parameter.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MmCorpus</span><span class="o">.</span><span class="n">save_corpus</span><span class="p">(</span><span class="s1">&#39;file.mm&#39;</span><span class="p">,</span> <span class="n">corpus</span><span class="p">)</span>
</pre></div>
</div>
<p>Some corpora also support an index of where each document begins, so
that the documents on disk can be accessed in O(1) time (see the
<cite>corpora.IndexedCorpus</cite> base class). In this case, <cite>save_corpus</cite> is automatically
called internally by <cite>serialize</cite>, which does <cite>save_corpus</cite> plus saves the index
at the same time, so you want to store the corpus with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MmCorpus</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="s1">&#39;file.mm&#39;</span><span class="p">,</span> <span class="n">corpus</span><span class="p">)</span> <span class="c1"># stores index as well, allowing random access to individual documents</span>
</pre></div>
</div>
<p>Calling <cite>serialize()</cite> is preferred to calling <cite>save_corpus()</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="gensim.corpora.textcorpus.TextDirectoryCorpus.step_through_preprocess">
<code class="descname">step_through_preprocess</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.TextDirectoryCorpus.step_through_preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield tuples of functions and their output for each stage of preprocessing.
This is useful for debugging issues with the corpus preprocessing pipeline.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="gensim.corpora.textcorpus.lower_to_unicode">
<code class="descclassname">gensim.corpora.textcorpus.</code><code class="descname">lower_to_unicode</code><span class="sig-paren">(</span><em>text</em>, <em>encoding='utf8'</em>, <em>errors='strict'</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.lower_to_unicode" title="Permalink to this definition">¶</a></dt>
<dd><p>Lowercase <cite>text</cite> and convert to unicode.</p>
</dd></dl>

<dl class="function">
<dt id="gensim.corpora.textcorpus.remove_short">
<code class="descclassname">gensim.corpora.textcorpus.</code><code class="descname">remove_short</code><span class="sig-paren">(</span><em>tokens</em>, <em>minsize=3</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.remove_short" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove tokens smaller than <cite>minsize</cite> chars, which is 3 by default.</p>
</dd></dl>

<dl class="function">
<dt id="gensim.corpora.textcorpus.remove_stopwords">
<code class="descclassname">gensim.corpora.textcorpus.</code><code class="descname">remove_stopwords</code><span class="sig-paren">(</span><em>tokens</em>, <em>stopwords=frozenset(['all'</em>, <em>'six'</em>, <em>'just'</em>, <em>'less'</em>, <em>'being'</em>, <em>'indeed'</em>, <em>'over'</em>, <em>'move'</em>, <em>'anyway'</em>, <em>'four'</em>, <em>'not'</em>, <em>'own'</em>, <em>'through'</em>, <em>'using'</em>, <em>'fify'</em>, <em>'where'</em>, <em>'mill'</em>, <em>'only'</em>, <em>'find'</em>, <em>'before'</em>, <em>'one'</em>, <em>'whose'</em>, <em>'system'</em>, <em>'how'</em>, <em>'somewhere'</em>, <em>'much'</em>, <em>'thick'</em>, <em>'show'</em>, <em>'had'</em>, <em>'enough'</em>, <em>'should'</em>, <em>'to'</em>, <em>'must'</em>, <em>'whom'</em>, <em>'seeming'</em>, <em>'yourselves'</em>, <em>'under'</em>, <em>'ours'</em>, <em>'two'</em>, <em>'has'</em>, <em>'might'</em>, <em>'thereafter'</em>, <em>'latterly'</em>, <em>'do'</em>, <em>'them'</em>, <em>'his'</em>, <em>'around'</em>, <em>'than'</em>, <em>'get'</em>, <em>'very'</em>, <em>'de'</em>, <em>'none'</em>, <em>'cannot'</em>, <em>'every'</em>, <em>'un'</em>, <em>'they'</em>, <em>'front'</em>, <em>'during'</em>, <em>'thus'</em>, <em>'now'</em>, <em>'him'</em>, <em>'nor'</em>, <em>'name'</em>, <em>'regarding'</em>, <em>'several'</em>, <em>'hereafter'</em>, <em>'did'</em>, <em>'always'</em>, <em>'who'</em>, <em>'didn'</em>, <em>'whither'</em>, <em>'this'</em>, <em>'someone'</em>, <em>'either'</em>, <em>'each'</em>, <em>'become'</em>, <em>'thereupon'</em>, <em>'sometime'</em>, <em>'side'</em>, <em>'towards'</em>, <em>'therein'</em>, <em>'twelve'</em>, <em>'because'</em>, <em>'often'</em>, <em>'ten'</em>, <em>'our'</em>, <em>'doing'</em>, <em>'km'</em>, <em>'eg'</em>, <em>'some'</em>, <em>'back'</em>, <em>'used'</em>, <em>'up'</em>, <em>'go'</em>, <em>'namely'</em>, <em>'computer'</em>, <em>'are'</em>, <em>'further'</em>, <em>'beyond'</em>, <em>'ourselves'</em>, <em>'yet'</em>, <em>'out'</em>, <em>'even'</em>, <em>'will'</em>, <em>'what'</em>, <em>'still'</em>, <em>'for'</em>, <em>'bottom'</em>, <em>'mine'</em>, <em>'since'</em>, <em>'please'</em>, <em>'forty'</em>, <em>'per'</em>, <em>'its'</em>, <em>'everything'</em>, <em>'behind'</em>, <em>'does'</em>, <em>'various'</em>, <em>'above'</em>, <em>'between'</em>, <em>'it'</em>, <em>'neither'</em>, <em>'seemed'</em>, <em>'ever'</em>, <em>'across'</em>, <em>'she'</em>, <em>'somehow'</em>, <em>'be'</em>, <em>'we'</em>, <em>'full'</em>, <em>'never'</em>, <em>'sixty'</em>, <em>'however'</em>, <em>'here'</em>, <em>'otherwise'</em>, <em>'were'</em>, <em>'whereupon'</em>, <em>'nowhere'</em>, <em>'although'</em>, <em>'found'</em>, <em>'alone'</em>, <em>'re'</em>, <em>'along'</em>, <em>'quite'</em>, <em>'fifteen'</em>, <em>'by'</em>, <em>'both'</em>, <em>'about'</em>, <em>'last'</em>, <em>'would'</em>, <em>'anything'</em>, <em>'via'</em>, <em>'many'</em>, <em>'could'</em>, <em>'thence'</em>, <em>'put'</em>, <em>'against'</em>, <em>'keep'</em>, <em>'etc'</em>, <em>'amount'</em>, <em>'became'</em>, <em>'ltd'</em>, <em>'hence'</em>, <em>'onto'</em>, <em>'or'</em>, <em>'con'</em>, <em>'among'</em>, <em>'already'</em>, <em>'co'</em>, <em>'afterwards'</em>, <em>'formerly'</em>, <em>'within'</em>, <em>'seems'</em>, <em>'into'</em>, <em>'others'</em>, <em>'while'</em>, <em>'whatever'</em>, <em>'except'</em>, <em>'down'</em>, <em>'hers'</em>, <em>'everyone'</em>, <em>'done'</em>, <em>'least'</em>, <em>'another'</em>, <em>'whoever'</em>, <em>'moreover'</em>, <em>'couldnt'</em>, <em>'throughout'</em>, <em>'anyhow'</em>, <em>'yourself'</em>, <em>'three'</em>, <em>'from'</em>, <em>'her'</em>, <em>'few'</em>, <em>'together'</em>, <em>'top'</em>, <em>'there'</em>, <em>'due'</em>, <em>'been'</em>, <em>'next'</em>, <em>'anyone'</em>, <em>'eleven'</em>, <em>'cry'</em>, <em>'call'</em>, <em>'therefore'</em>, <em>'interest'</em>, <em>'then'</em>, <em>'thru'</em>, <em>'themselves'</em>, <em>'hundred'</em>, <em>'really'</em>, <em>'sincere'</em>, <em>'empty'</em>, <em>'more'</em>, <em>'himself'</em>, <em>'elsewhere'</em>, <em>'mostly'</em>, <em>'on'</em>, <em>'fire'</em>, <em>'am'</em>, <em>'becoming'</em>, <em>'hereby'</em>, <em>'amongst'</em>, <em>'else'</em>, <em>'part'</em>, <em>'everywhere'</em>, <em>'too'</em>, <em>'kg'</em>, <em>'herself'</em>, <em>'former'</em>, <em>'those'</em>, <em>'he'</em>, <em>'me'</em>, <em>'myself'</em>, <em>'made'</em>, <em>'twenty'</em>, <em>'these'</em>, <em>'was'</em>, <em>'bill'</em>, <em>'cant'</em>, <em>'us'</em>, <em>'until'</em>, <em>'besides'</em>, <em>'nevertheless'</em>, <em>'below'</em>, <em>'anywhere'</em>, <em>'nine'</em>, <em>'can'</em>, <em>'whether'</em>, <em>'of'</em>, <em>'your'</em>, <em>'toward'</em>, <em>'my'</em>, <em>'say'</em>, <em>'something'</em>, <em>'and'</em>, <em>'whereafter'</em>, <em>'whenever'</em>, <em>'give'</em>, <em>'almost'</em>, <em>'wherever'</em>, <em>'is'</em>, <em>'describe'</em>, <em>'beforehand'</em>, <em>'herein'</em>, <em>'doesn'</em>, <em>'an'</em>, <em>'as'</em>, <em>'itself'</em>, <em>'at'</em>, <em>'have'</em>, <em>'in'</em>, <em>'seem'</em>, <em>'whence'</em>, <em>'ie'</em>, <em>'any'</em>, <em>'fill'</em>, <em>'again'</em>, <em>'hasnt'</em>, <em>'inc'</em>, <em>'thereby'</em>, <em>'thin'</em>, <em>'no'</em>, <em>'perhaps'</em>, <em>'latter'</em>, <em>'meanwhile'</em>, <em>'when'</em>, <em>'detail'</em>, <em>'same'</em>, <em>'wherein'</em>, <em>'beside'</em>, <em>'also'</em>, <em>'that'</em>, <em>'other'</em>, <em>'take'</em>, <em>'which'</em>, <em>'becomes'</em>, <em>'you'</em>, <em>'if'</em>, <em>'nobody'</em>, <em>'unless'</em>, <em>'whereas'</em>, <em>'see'</em>, <em>'though'</em>, <em>'may'</em>, <em>'after'</em>, <em>'upon'</em>, <em>'most'</em>, <em>'hereupon'</em>, <em>'eight'</em>, <em>'but'</em>, <em>'serious'</em>, <em>'nothing'</em>, <em>'such'</em>, <em>'why'</em>, <em>'off'</em>, <em>'a'</em>, <em>'don'</em>, <em>'whereby'</em>, <em>'third'</em>, <em>'i'</em>, <em>'whole'</em>, <em>'noone'</em>, <em>'sometimes'</em>, <em>'well'</em>, <em>'amoungst'</em>, <em>'yours'</em>, <em>'their'</em>, <em>'rather'</em>, <em>'without'</em>, <em>'so'</em>, <em>'five'</em>, <em>'the'</em>, <em>'first'</em>, <em>'with'</em>, <em>'make'</em>, <em>'once'])</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.remove_stopwords" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove stopwords using list from <cite>gensim.parsing.preprocessing.STOPWORDS</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="gensim.corpora.textcorpus.strip_multiple_whitespaces">
<code class="descclassname">gensim.corpora.textcorpus.</code><code class="descname">strip_multiple_whitespaces</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.strip_multiple_whitespaces" title="Permalink to this definition">¶</a></dt>
<dd><p>Collapse multiple whitespace characters into a single space.</p>
</dd></dl>

<dl class="function">
<dt id="gensim.corpora.textcorpus.walk">
<code class="descclassname">gensim.corpora.textcorpus.</code><code class="descname">walk</code><span class="sig-paren">(</span><em>top</em>, <em>topdown=True</em>, <em>onerror=None</em>, <em>followlinks=False</em>, <em>depth=0</em><span class="sig-paren">)</span><a class="headerlink" href="#gensim.corpora.textcorpus.walk" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a mostly copied version of <cite>os.walk</cite> from the Python 2 source code.
The only difference is that it returns the depth in the directory tree structure
at which each yield is taking place.</p>
</dd></dl>

</div>


          </div>
        </div>
      

      <div class="clearer"></div>
    </div>
    

    
    <div id="footer">
      <div id="footerwrapper">
        <div id="footerleft">
          <img src="../_static/images/logo-gensim.png" class="smallerlogo" alt="smaller gensim logo" />
          <a href="../index.html"><img src="../_static/images/gensim-footer.png" alt="gensim footer image" title="Gensim home" /></a>

          <div class="copyright">
            &copy; Copyright 2009-now, <a href="mailto:radimrehurek@seznam.cz" style="color:white"> Radim Řehůřek</a>
            <br />
              Last updated on Nov 06, 2017.
          </div>
        </div>

        <div id="footermiddleright">
          <div id="footermiddle">
            <ul class="navigation">
              <li><a href="../index.html">
                Home
              </a></li>
              <li>|</li>
              <li><a href="../tutorial.html">
                Tutorials
              </a></li>
              <li>|</li>
              <li><a href="../install.html">
                Install
              </a></li>
              <li>|</li>
              <li><a href="../support.html">
                Support
              </a></li>
              <li>|</li>
              <li><a href="../apiref.html">
                API
              </a></li>
              <li>|</li>
              <li><a href="../about.html">
                About
              </a></li>
            </ul>

            <div class="tweetodsazeni">
              <div class="tweet">
                <a href="https://twitter.com/radimrehurek" target="_blank" style="color: white">Tweet @RadimRehurek</a>
              </div>
            </div>

          </div>

          <div id="footerright">
            <div class="footernadpis">
              Support:
            </div>
            <div class="googlegroupsodsazeni">
              <a href="https://groups.google.com/group/gensim" class="googlegroups">
                Stay informed via gensim mailing list:
              </a>

              <form action="http://groups.google.com/group/gensim/boxsubscribe">
                <input type="text" name="email" placeholder="your@email.com" size="28" />
                <input type="submit" name="sub" value="Subscribe" />
              </form>

            </div>

            <div class="addthis_toolbox addthis_default_style addthis_32x32_style"
                addthis:title="#gensim"
                addthis:description="Efficient Topic Modelling in Python"
                style="margin:20px 0 0 0">
              <a class="addthis_button_preferred_1"></a>
              <a class="addthis_button_preferred_2"></a>
              <a class="addthis_button_preferred_3"></a>
              <a class="addthis_button_preferred_4"></a>
              <a class="addthis_button_compact"></a>
              <a class="addthis_counter addthis_bubble_style"></a>
            </div>
          </div>

        </div>
      </div>
    </div>
    

    <script type="text/javascript">
      (function() {
      var at = document.createElement('script'); at.type = 'text/javascript'; at.async = true;
      at.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 's7.addthis.com/js/250/addthis_widget.js#pubid=ra-4d738b9b1d31ccbd';
      var sat = document.getElementsByTagName('script')[0]; sat.parentNode.insertBefore(at, sat);
      })();
    </script>

  </body>
</html>